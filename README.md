[![code style: prettier](https://img.shields.io/badge/code_style-prettier-ff69b4.svg?style=flat-square)](https://github.com/prettier/prettier)

# Vulnerability Dashboard API Schema

[![CircleCI](https://circleci.com/gh/Financial-Times/vulnerability-dashboard-api-schema-public/tree/main.svg?style=svg&circle-token=a43c9575d7901e47a2c5fc92737243a82a0c0386)](https://circleci.com/gh/Financial-Times/vulnerability-dashboard-api-schema-public/tree/main)

Schema for [Vulnerability Dashboard API](https://github.com/Financial-Times/vulnerability-dashboard-api).
Defined in JSON files using [json-schema 2020-12](https://json-schema.org/draft/2020-12/release-notes.html),
which outline which properties are expected.

## Adding a new schema file

1. Create a new file in `schema` with the file extension `schema.json` e.g team.schema.json
1. Define schema using json-schema 2020-12
1. Create an example data payload in `test/data` that represents the new schema
1. Create PR and CircleCI will run tests

## Updating an existing schema

1. Update relevant schema
1. Update data payload in `test/data` for appropriate schema
1. Create PR and CircleCI will run tests

## Removing from schema

:warning: vulnerability dashboard api is not versioned

## Linting and Testing

### Linting

To check if your JSON is properly linted:

```bash
npm install --dev
npm run lint
```

To format the JSON:

```bash
npm install --dev
npm run lint-fix
```

### Testing

This compares the JSON schema files to example JSON

```bash
npm install --dev
npm run test
```

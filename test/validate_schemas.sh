schema_dir=../schema
test_data_dir=./data
extension=.schema.json

validate_json () {
  schema_file_with_extension=$1
  schema_file_name=${base_name%"$extension"}
  test_payload_file_name=$(ls "$test_data_dir" | grep "$schema_file_name")
  echo $schema_file_with_extension
  ajv validate -s $schema_dir/$schema_file_with_extension -d $test_data_dir/$test_payload_file_name --spec=draft2020
}

for file in $schema_dir/*; do
  base_name=$(basename "$file")
  validate_json "$base_name"
done
